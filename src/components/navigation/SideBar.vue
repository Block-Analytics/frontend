<template>
  <div
    class="fixed inset-y-0 my-auto left-10 menu px-4 w-[70px] h-fit py-6 bg-[#000000]/40 backdrop-blur-lg gap-8 rounded-full justify-center items-center">
    <div class="logo">
      <svg class="h-6 w-auto" viewBox="0 0 860 739" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M357.223 41.3137C389.568 -13.7711 470.432 -13.7714 502.777 41.3137L852.109 636.232C868.353 663.896 858.713 699.27 830.578 715.241C802.442 731.213 766.465 721.735 750.221 694.071L430 148.729L109.779 694.071C93.5352 721.735 57.5582 731.213 29.4225 715.241C1.28677 699.27 -8.35324 663.896 7.89092 636.232L357.223 41.3137Z"
          fill="white" />
        <circle cx="430" cy="653" r="86" fill="#38D900" />
      </svg>
    </div>
    <div class="home relative">
      <div
      :class="activeSection == 'home'?'-translate-x-0 -translate-y-0 opacity-100':'opacity-0 -translate-x-1 -translate-y-1'"
      class="absolute rounded-full -right-1 -top-1 h-8 w-8 bg-[#38D900] z-10 transition-all duration-300"></div>
      <div class="icon flex items-center justify-center relative rounded-full h-8 w-8 z-20 bg-white/20"
        :class="{ 'gradient-radial': activeSection == 'home' }">
        <svg class="h-4" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg">
          <g>
            <path
              d="M8.66667 0.565271C9.05133 0.276778 9.51918 0.120827 10 0.120827C10.4808 0.120827 10.9487 0.276778 11.3333 0.565271L19.1111 6.3986C19.3871 6.6056 19.6111 6.87401 19.7654 7.18257C19.9197 7.49114 20 7.83139 20 8.17638V18.7319C20 19.3213 19.7659 19.8865 19.3491 20.3033C18.9324 20.72 18.3671 20.9542 17.7778 20.9542H2.22222C1.63285 20.9542 1.06762 20.72 0.650874 20.3033C0.234126 19.8865 0 19.3213 0 18.7319V8.17638C0 7.83139 0.0803225 7.49114 0.234606 7.18257C0.38889 6.87401 0.612898 6.6056 0.888889 6.3986L8.66667 0.565271Z"
              fill="white" />
          </g>
        </svg>
      </div>
    </div>
    <div class="ethereum relative">
      <div
      :class="activeSection == 'eth'?'-translate-x-0 -translate-y-0 opacity-100':'opacity-0 -translate-x-1 -translate-y-1'"
      class="absolute rounded-full -right-1 -top-1 h-8 w-8 bg-[#38D900] z-10 transition-all duration-300"></div>
      <div class="icon flex items-center justify-center relative rounded-full h-8 w-8 z-20 bg-white/20"
        :class="{ 'gradient-radial': activeSection == 'eth' }">
        <svg class="h-5 mx-auto" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11.7265 11.2774C11.7015 11.2758 6.04158 14.63 5.96741 14.6587C5.95071 14.649 0.241039 11.2698 0.213867 11.2732C0.227736 11.2935 5.96358 19.392 5.96741 19.392C5.9713 19.392 11.7265 11.2774 11.7265 11.2774Z"
            fill="white" />
          <path d="M5.97015 0.566048L0.232483 10.1622L5.97015 13.5608L11.7078 10.1622L5.97015 0.566048Z" fill="white" />
        </svg>
      </div>
    </div>
    <div class="avalanche relative">
      <div
      :class="activeSection == 'avax'?'-translate-x-0 -translate-y-0 opacity-100':'opacity-0 -translate-x-1 -translate-y-1'"
      class="absolute rounded-full -right-1 -top-1 h-8 w-8 bg-[#38D900] z-10 transition-all duration-300"></div>
      <div class="icon flex items-center justify-center relative rounded-full h-8 w-8 z-20 bg-white/20"
        :class="{ 'gradient-radial': activeSection == 'avax' }">
        <svg class="h-7" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M20.4811 16.8177C20.9212 16.0587 21.6314 16.0587 22.0715 16.8177L24.8122 21.6217C25.2523 22.3808 24.8922 23 24.012 23H18.4906C17.6204 23 17.2603 22.3808 17.6904 21.6217L20.4811 16.8177ZM15.1798 7.56929C15.6199 6.81024 16.3201 6.81024 16.7602 7.56929L17.3703 8.66792L18.8107 11.1948C19.1608 11.9139 19.1608 12.7628 18.8107 13.4819L13.9795 21.8414C13.5394 22.5206 12.8092 22.9501 11.999 23H7.98803C7.10782 23 6.74773 22.3908 7.18784 21.6217L15.1798 7.56929Z"
            fill="white" />
          <defs>
          </defs>
        </svg>
      </div>
    </div>
    <div class="tezos relative">
      <div v-if="activeSection == 'xtz'" class="absolute rounded-full -right-1 -top-1 h-8 w-8 bg-[#38D900] z-10"></div>
      <div class="icon flex items-center justify-center relative rounded-full h-8 w-8 z-20 bg-white/20"
        :class="{ 'gradient-radial': activeSection == 'xtz' }">
        <svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <mask id="mask0_3_2" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="14"
            height="18">
            <path d="M13.2904 0H0V18H13.2904V0Z" fill="white" />
          </mask>
          <g mask="url(#mask0_3_2)">
            <path
              d="M6.60857 16.2421C6.69324 16.3527 6.79774 16.4466 6.91675 16.5189C7.16527 16.666 7.43842 16.7669 7.72294 16.8166C8.10085 16.902 8.49024 16.9247 8.87552 16.8838C9.25971 16.8521 9.63037 16.7272 9.95538 16.52C10.2804 16.3127 10.5499 16.0292 10.7406 15.6942C10.9332 15.3547 11.0697 14.9863 11.1449 14.6033C11.2499 14.0826 11.2903 13.551 11.2651 13.0205C11.2553 12.5947 11.196 12.1715 11.0882 11.7594C11.0203 11.5131 10.9289 11.2739 10.8152 11.045C10.6748 10.7531 10.475 10.4936 10.2287 10.2832C9.9824 10.0727 9.69492 9.91595 9.38463 9.82281C9.08492 9.72483 8.76914 9.68549 8.45455 9.70694C8.26129 9.72136 8.07227 9.77086 7.89675 9.85302C7.62247 9.97629 7.35313 10.1113 7.08132 10.2413L6.5494 10.4959C6.52043 10.51 6.48777 10.5211 6.45017 10.539C6.44147 10.513 6.43528 10.4861 6.43168 10.4589C6.43168 10.3541 6.43168 10.2493 6.43168 10.1446C6.43484 10.092 6.45671 10.0424 6.49331 10.0046L7.33032 8.88781L10.4078 4.78289C10.4306 4.75269 10.4515 4.72125 10.4817 4.67811H4.90744C4.90744 4.71879 4.90004 4.75392 4.90004 4.78844C4.90004 6.62681 4.90004 8.46499 4.90004 10.303C4.89196 10.5918 4.94119 10.8795 5.04488 11.1492C5.07839 11.2308 5.11816 11.3098 5.16384 11.3853C5.25216 11.5321 5.37643 11.654 5.52492 11.7395C5.67341 11.8251 5.84123 11.8713 6.01256 11.874C6.40193 11.8974 6.78578 11.773 7.08748 11.5258C7.39377 11.294 7.65935 11.0128 7.87333 10.6937C7.90398 10.6427 7.95207 10.6044 8.00872 10.5861C8.06537 10.5677 8.12674 10.5705 8.18151 10.5939C8.28871 10.6361 8.37826 10.7137 8.43531 10.8138C8.49237 10.9139 8.51351 11.0305 8.49523 11.1443C8.46739 11.3156 8.41049 11.4809 8.32697 11.633C8.17101 11.9374 7.95422 12.2065 7.69001 12.4236C7.4258 12.6407 7.11981 12.8013 6.79101 12.8953C6.58346 12.9567 6.36828 12.9884 6.15185 12.9896C5.70286 12.9992 5.25417 12.9598 4.81375 12.8719C4.5172 12.8144 4.23159 12.7104 3.9675 12.5637C3.54402 12.3111 3.22385 11.9165 3.06392 11.45C2.95665 11.1713 2.89585 10.8769 2.88395 10.5785C2.87593 10.3886 2.86977 10.1988 2.86977 10.009C2.86977 8.28316 2.86977 6.55737 2.86977 4.83158C2.86977 4.78351 2.86607 4.73543 2.86361 4.67626H0.0246812C-0.008022 4.31732 -0.00946559 3.95622 0.0203667 3.59703H2.87963C2.88333 3.55696 2.88888 3.52861 2.88888 3.50087C2.88888 2.76371 2.88888 2.02656 2.88888 1.2894C2.88964 1.26529 2.88518 1.2413 2.87582 1.21907C2.86646 1.19683 2.85241 1.17688 2.83464 1.16058C2.65466 0.983685 2.47839 0.803094 2.29841 0.6262C2.27795 0.607945 2.2618 0.585368 2.25114 0.560103C2.24048 0.534839 2.23557 0.50752 2.23678 0.480124C2.24047 0.326652 2.23678 0.171947 2.23678 0.0098464C2.27992 0.00553193 2.3095 -1.52588e-05 2.34156 -1.52588e-05C2.92709 -1.52588e-05 3.51263 -1.52588e-05 4.10001 -1.52588e-05C4.14524 0.00119632 4.18964 0.0123492 4.23006 0.0326515C4.42668 0.130035 4.62022 0.232966 4.81745 0.329734C4.84348 0.33938 4.86549 0.35753 4.87992 0.381244C4.89435 0.404959 4.90035 0.43285 4.89696 0.460401C4.89696 0.515873 4.89696 0.571961 4.89696 0.627433C4.89696 1.56141 4.89696 2.49519 4.89696 3.42876C4.89696 3.47375 4.90189 3.51813 4.90435 3.56991C4.94442 3.56991 4.97647 3.57607 5.0079 3.57545C5.89258 3.57545 6.77725 3.57443 7.66192 3.57237C9.18226 3.56826 10.7026 3.56271 12.2229 3.55573C12.2601 3.55379 12.2971 3.56026 12.3314 3.57467C12.3657 3.58908 12.3962 3.61105 12.4208 3.63894C12.61 3.83432 12.8042 4.02477 12.9965 4.21708C13.0217 4.24235 13.0458 4.26823 13.0649 4.28919C13.0649 4.30213 13.0649 4.30522 13.0649 4.30891C13.0653 4.31198 13.0653 4.31509 13.0649 4.31816C13.0618 4.32396 13.0583 4.32952 13.0544 4.3348L13.0482 4.3422L13.0211 4.37055L8.59138 8.8237C8.59138 8.8237 8.59138 8.82987 8.58645 8.83973C8.65425 8.81816 8.71774 8.79597 8.78184 8.77809C9.03797 8.69557 9.30692 8.66007 9.5757 8.67331C9.84645 8.69962 10.1128 8.76009 10.3683 8.85329C10.7667 8.9951 11.1467 9.18424 11.5 9.41664C11.8489 9.64727 12.1484 9.94525 12.3807 10.2931C12.7071 10.758 12.9484 11.2773 13.0932 11.8266C13.1974 12.2429 13.261 12.6683 13.2831 13.0969C13.3315 14.0638 13.1186 15.026 12.6667 15.8822C12.2861 16.6169 11.6615 17.1962 10.9002 17.5205C10.3975 17.7453 9.86366 17.893 9.31683 17.9587C8.93269 18.0037 8.54525 18.0136 8.15932 17.9883C7.79319 17.9677 7.4299 17.9118 7.07454 17.8212C6.36102 17.6404 5.74361 17.1937 5.34875 16.5725C5.12272 16.2453 4.97123 15.8725 4.90497 15.4803C4.85433 15.2258 4.85664 14.9635 4.91175 14.7099C4.95607 14.512 5.05379 14.33 5.1943 14.1837C5.3348 14.0374 5.51272 13.9325 5.7087 13.8803C5.94867 13.8062 6.20415 13.7981 6.44832 13.8568C6.64589 13.8955 6.82909 13.9876 6.97797 14.1231C7.12685 14.2586 7.23571 14.4324 7.29273 14.6254C7.39055 14.9202 7.38925 15.2388 7.28903 15.5327C7.24192 15.6782 7.16503 15.8123 7.06327 15.9265C6.96151 16.0407 6.83709 16.1324 6.69794 16.1959L6.62768 16.2298C6.62195 16.2341 6.61659 16.2388 6.61165 16.244"
              fill="#FAFAFF" />
          </g>
        </svg>

      </div>
    </div>
  </div>
</template>
<script lang="ts">
import { defineComponent, computed, ref, onMounted } from 'vue';
import { useRoute } from 'vue-router'
import { storeToRefs } from 'pinia'
import { useblockchainDataStore } from '@/store/blockchainData'

export default defineComponent({
  name: 'SideBar',
  setup() {
    const blockchainDataStore = useblockchainDataStore()
    let { nav } = storeToRefs(blockchainDataStore)
    const route = useRoute();
    const activeSection = ref('home');
    const currRoute = computed(() => route.path.toString().toLowerCase() ?? '');

    onMounted(() => {
      window.addEventListener(
        'scroll',
        function () {
          var offsetETH = document.querySelector<HTMLElement>('#eth')?.offsetTop;
          var offsetAVAX = document.querySelector<HTMLElement>('#avax')?.offsetTop;
          console.log(offsetETH, offsetAVAX);
          console.log(window.scrollY);
          
          
          //var offsetXTZ = document.querySelector<HTMLElement>('#xtz').offsetHeight;
          if (window.scrollY > offsetAVAX*0.8)
          {
            activeSection.value = 'avax';
          }
          else if (window.scrollY > offsetETH*0.8)
          {
            activeSection.value = 'eth';
          }
          else {
            activeSection.value = 'home';
          }

        },
        false
      );
    })

    return {
      currRoute,
      activeSection
    }
  }
})
</script>
<style lang="scss">
.gradient-radial {
  background: radial-gradient(at 20px 11px, #60E134 39%, #63805A 64%) !important;
}
</style>